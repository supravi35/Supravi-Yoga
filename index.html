
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supravi Yoga - Find Your Inner Peace</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Firebase App (core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <!-- Firebase Auth -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <!-- Firebase Analytics -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics-compat.js"></script>
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        /* Global Styles */
        :root {
            --primary: #4a8e7c;
            --secondary: #f8b400;
            --light: #f6f6f6;
            --dark: #333;
            --accent: #ff6b6b;
            --success: #28a745;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background-color: #3a7262;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        .btn-secondary:hover {
            background-color: #e09e00;
        }

        .btn-success {
            background-color: var(--success);
        }

        .btn-success:hover {
            background-color: #218838;
        }

        .btn-disabled {
            background-color: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn-disabled:hover {
            transform: none;
            background-color: #6c757d;
        }

        .btn-danger {
            background-color: var(--accent);
        }

        .btn-danger:hover {
            background-color: #e55555;
        }
        
        section {
            padding: 80px 0;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            color: var(--primary);
            font-size: 2.5rem;
            position: relative;
        }
        
        .section-title:after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: var(--secondary);
            margin: 15px auto;
            border-radius: 2px;
        }
        
        /* Header Styles */
        header {
            background-color: white;
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
        }
        
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }
        
        .logo {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            text-decoration: none;
            flex: 1;
        }
        
        .logo-text {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            line-height: 1;
        }

        .logo-tagline {
            font-size: 0.9rem;
            color: #666;
            font-style: italic;
            font-weight: 300;
            align-self: flex-end;
            margin-top: -5px;
        }
        
        .nav-links {
            display: flex;
            list-style: none;
        }
        
        .nav-links li {
            margin-left: 30px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .nav-links a:hover {
            color: var(--primary);
        }
        
        .auth-menu {
            display: none;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .user-name {
            font-weight: 600;
            color: var(--primary);
        }

        .admin-indicator {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: bold;
            margin-left: 5px;
        }

        .online-count {
            background: var(--secondary);
            color: var(--dark);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }
        
        /* Mobile Menu */
        .menu-toggle {
            display: none;
            flex-direction: column;
            justify-content: space-around;
            width: 30px;
            height: 25px;
            cursor: pointer;
        }
        
        .menu-toggle span {
            width: 100%;
            height: 3px;
            background-color: var(--primary);
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .mobile-auth {
            display: none;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') no-repeat center center/cover;
            height: 100vh;
            color: white;
            display: flex;
            align-items: center;
            text-align: center;
            padding-top: 80px;
        }
        
        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            line-height: 1.2;
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        /* Dashboard Styles */
        .dashboard {
            display: none;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .dashboard.active {
            display: block;
        }

        .dashboard-header {
            background: linear-gradient(135deg, var(--primary), #2d5a4a);
            color: white;
            padding: 40px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dashboard-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            animation: floatBackground 20s linear infinite;
        }

        @keyframes floatBackground {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .dashboard-title {
            position: relative;
            z-index: 2;
            flex: 1;
            text-align: left;
        }

        .dashboard-logo {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .dashboard-tagline {
            font-size: 1rem;
            opacity: 0.8;
            font-style: italic;
        }

        .dashboard-user-info {
            position: relative;
            z-index: 2;
            text-align: right;
        }

        .dashboard-user-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .dashboard-nav {
            background: white;
            border-radius: 15px;
            margin: 30px 0;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .dashboard-tabs {
            display: flex;
            gap: 20px;
        }

        .dashboard-nav button {
            background: none;
            border: none;
            padding: 15px 25px;
            font-size: 1.1rem;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .dashboard-nav button.active {
            background: var(--primary);
            color: white;
        }

        .dashboard-nav button:hover:not(.active) {
            background: #f0f0f0;
        }

        .dashboard-content {
            display: none;
            background: white;
            margin: 20px 0;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .dashboard-content.active {
            display: block;
        }

        /* Admin Panel Styles */
        .admin-panel {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .admin-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .admin-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .admin-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .admin-section h4 {
            margin-bottom: 15px;
        }

        .admin-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .admin-form input, .admin-form select, .admin-form textarea {
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
        }

        .admin-form button {
            background: white;
            color: var(--primary);
            border: none;
            padding: 12px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .admin-form button:hover {
            background: #f0f0f0;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Yoga Quotes Slider */
        .yoga-quotes-container {
            background: linear-gradient(45deg, #667eea, #764ba2);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            overflow: hidden;
            position: relative;
            min-height: 80px;
        }

        .yoga-quote {
            color: white;
            text-align: center;
            font-style: italic;
            font-size: 1.1rem;
            display: none;
            animation: fadeInOut 6s ease-in-out infinite;
        }

        .yoga-quote.active {
            display: block;
        }

        .yoga-quote .quote-text {
            margin-bottom: 10px;
        }

        .yoga-quote .quote-author {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0; transform: translateY(20px); }
            10%, 90% { opacity: 1; transform: translateY(0); }
        }

        .class-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .dashboard-class-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .dashboard-class-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .dashboard-class-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .dashboard-card-content {
            padding: 25px;
        }

        .class-status {
            display: inline-block;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .status-locked {
            background-color: #f8d7da;
            color: #721c24;
        }

        .status-unlocked {
            background-color: #d4edda;
            color: #155724;
        }

        .class-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary);
            margin: 15px 0;
        }

        .zoom-link {
            background: var(--success);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            display: inline-block;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .zoom-link:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .admin-zoom-link {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            text-decoration: none;
            display: inline-block;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .admin-zoom-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Profile Section */
        .profile-section {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .profile-edit-mode .form-group input {
            border: 2px solid var(--primary);
            background: #f8f9fa;
        }

        .profile-edit-mode .form-group input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 142, 124, 0.1);
        }
        
        /* About Section - Curved Box Design */
        .about {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .about::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" preserveAspectRatio="none"><path d="M421.9,6.5c22.6-2.5,51.5,0.4,75.5,5.3c23.6,4.9,70.9,23.5,100.5,35.7c75.8,32.2,133.7,44.5,192.6,49.7c23.6,2.1,48.7,3.5,103.4-2.5c54.7-6,106.2-25.6,106.2-25.6V0H0v30.3c0,0,72,32.6,158.4,30.5c39.2-0.7,92.8-6.7,134-22.4c21.2-8.1,52.2-18.2,79.7-24.2C399.3,7.9,411.6,7.5,421.9,6.5z" fill="rgba(255,255,255,0.1)"/></svg>') no-repeat center top;
            background-size: cover;
        }

        .about-curved-container {
            background: rgba(255, 255, 255, 0.95);
            color: var(--dark);
            margin: 40px 0;
            padding: 40px;
            border-radius: 50px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }

        .about-curved-container::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(74, 142, 124, 0.1), transparent);
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .about-curved-title {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 900;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 30px;
            position: relative;
            z-index: 2;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .about-content {
            display: flex;
            align-items: center;
            gap: 50px;
            position: relative;
            z-index: 2;
        }
        
        .about-text {
            flex: 1;
        }

        .about-text p {
            font-size: 1.1rem;
            margin-bottom: 20px;
            line-height: 1.8;
            text-align: justify;
        }
        
        .about-image {
            flex: 1;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }
        
        .about-image img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.5s ease;
        }
        
        .about-image:hover img {
            transform: scale(1.05);
        }
        
        /* Certificates Section */
        .certificates {
            background-color: #f9f9f9;
        }
        
        .certificates-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }
        
        .certificate-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .certificate-card:hover {
            transform: translateY(-10px);
        }
        
        .certificate-image {
            height: 200px;
            overflow: hidden;
        }
        
        .certificate-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .certificate-card:hover .certificate-image img {
            transform: scale(1.1);
        }
        
        .certificate-content {
            padding: 25px;
        }
        
        .certificate-content h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .certificate-content p {
            color: #666;
            line-height: 1.6;
        }
        
        /* Benefits Section */
        .benefits {
            background-color: #f0f7f4;
        }
        
        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .benefit-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-align: center;
        }
        
        .benefit-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        
        .benefit-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .benefit-card h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        /* Classes Section */
        .classes-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .class-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        
        .class-card:hover {
            transform: translateY(-10px);
        }
        
        .class-image {
            height: 200px;
            overflow: hidden;
        }
        
        .class-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .class-card:hover .class-image img {
            transform: scale(1.1);
        }
        
        .class-content {
            padding: 20px;
        }
        
        .class-content h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .class-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            color: #777;
        }
        
        /* Yoga Postures Section */
        .postures-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .posture-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        
        .posture-card:hover {
            transform: translateY(-10px);
        }
        
        .posture-image {
            height: 250px;
            overflow: hidden;
        }
        
        .posture-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }
        
        .posture-card:hover .posture-image img {
            transform: scale(1.1);
        }
        
        .posture-content {
            padding: 20px;
        }
        
        .posture-content h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .posture-benefits {
            color: #777;
            margin-bottom: 15px;
        }

        .posture-fact {
            background: #f0f7f4;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            margin-top: 15px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .posture-fact i {
            color: var(--primary);
            margin-top: 2px;
            font-size: 1.1rem;
        }

        .posture-fact span {
            font-size: 0.9rem;
            line-height: 1.5;
            color: #555;
        }
        
        /* Testimonials */
        .testimonials {
            background: linear-gradient(to right, #4a8e7c, #5da992);
            color: white;
        }
        
        .testimonials .section-title {
            color: white;
        }
        
        .testimonials .section-title:after {
            background: var(--secondary);
        }
        
        .testimonial-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        .testimonial {
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .testimonial-text {
            font-size: 1.2rem;
            font-style: italic;
            margin-bottom: 20px;
        }
        
        .testimonial-author {
            font-weight: 600;
        }
        
        /* Login/Signup Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 40px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            position: relative;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.2);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #777;
        }
        
        .auth-form h2 {
            text-align: center;
            margin-bottom: 30px;
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .form-footer {
            text-align: center;
            margin-top: 20px;
        }
        
        .form-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }
        
        .error-message {
            color: red;
            margin-top: 10px;
            text-align: center;
            display: none;
        }
        
        .success-message {
            color: green;
            margin-top: 10px;
            text-align: center;
            display: none;
        }

        .otp-section {
            display: none;
            margin-top: 20px;
        }

        .otp-input {
            text-align: center;
            font-size: 1.2rem;
            letter-spacing: 2px;
        }

        .resend-otp {
            color: var(--primary);
            cursor: pointer;
            text-decoration: underline;
            font-size: 0.9rem;
            margin-top: 10px;
            display: inline-block;
        }

        /* Payment Modal */
        .payment-info {
            text-align: center;
            margin-bottom: 20px;
        }

        .payment-amount {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin: 20px 0;
        }

        .payment-instructions {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }

        .payment-instructions ol {
            margin-left: 20px;
        }

        .payment-instructions li {
            margin-bottom: 10px;
        }

        .razorpay-link {
            background: #528ff0;
            color: white;
            padding: 15px 30px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
            margin: 20px 0;
            font-weight: bold;
        }

        .razorpay-link:hover {
            background: #4285f4;
        }

        /* Loading Spinner */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 60px 0 30px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-column h3 {
            color: var(--secondary);
            margin-bottom: 20px;
            font-size: 1.3rem;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 10px;
        }
        
        .footer-links a {
            color: #ccc;
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-links a:hover {
            color: var(--secondary);
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            transition: all 0.3s ease;
        }
        
        .social-links a:hover {
            background-color: var(--secondary);
            color: var(--dark);
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #999;
        }
        
        /* Responsive Design */
        @media (max-width: 992px) {
            .about-content {
                flex-direction: column;
            }
            
            .hero h1 {
                font-size: 2.8rem;
            }
            
            .nav-links {
                display: none;
                flex-direction: column;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: white;
                padding: 20px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .nav-links li {
                margin: 10px 0;
            }
            
            .menu-toggle {
                display: flex;
            }
            
            .mobile-auth {
                display: flex;
            }
            
            .user-info {
                display: none;
            }

            .dashboard-header {
                flex-direction: column;
                text-align: center;
            }

            .dashboard-user-info {
                text-align: center;
                margin-top: 20px;
            }

            .dashboard-nav {
                flex-direction: column;
                gap: 10px;
            }

            .dashboard-tabs {
                flex-direction: column;
                width: 100%;
            }

            .class-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .navbar {
                flex-direction: row;
                padding: 15px 0;
            }

            .logo-text {
                font-size: 2rem;
            }
            
            .hero {
                height: auto;
                padding: 120px 0 80px;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            section {
                padding: 60px 0;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .about-curved-container {
                margin: 20px 0;
                padding: 30px 20px;
            }

            .about-curved-title {
                font-size: 2rem;
            }

            .dashboard-logo {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <div class="menu-toggle" id="menuToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                
                <a href="#" class="logo" onclick="showLandingPage()">
                    <span class="logo-text">Supravi Yoga</span>
                    <span class="logo-tagline">- Essence of Life</span>
                </a>
                
                <ul class="nav-links" id="navLinks">
                    <li><a href="#home" onclick="showLandingPage()">Home</a></li>
                    <li><a href="#about" onclick="showLandingPage()">About</a></li>
                    <li><a href="#certificates" onclick="showLandingPage()">Certificates</a></li>
                    <li><a href="#benefits" onclick="showLandingPage()">Benefits</a></li>
                    <li><a href="#classes" onclick="showLandingPage()">Classes</a></li>
                    <li><a href="#postures" onclick="showLandingPage()">Postures</a></li>
                    <li><a href="#testimonials" onclick="showLandingPage()">Testimonials</a></li>
                    <div class="mobile-auth">
                        <button class="btn" id="mobileLoginBtn">Login</button>
                        <button class="btn btn-secondary" id="mobileSignupBtn">Sign Up</button>
                    </div>
                </ul>
                
                <div class="user-info" id="userInfo" style="display: none;">
                    <div class="user-profile">
                        <div class="user-avatar" id="userAvatar"></div>
                        <div>
                            <div class="user-name" id="userName"></div>
                            <span id="adminIndicator" class="admin-indicator" style="display: none;">ADMIN</span>
                            <span id="onlineCount" class="online-count" style="display: none;"></span>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Landing Page Content -->
    <div id="landingPage">
        <!-- Hero Section -->
        <section class="hero" id="home">
            <div class="container">
                <div class="hero-content">
                    <h1>Find Your Inner Peace with Supravi Yoga</h1>
                    <p>Join our online yoga community and transform your body, mind, and spirit with expert guidance from certified instructor.</p>
                    <a href="#classes" class="btn btn-secondary">Explore Classes</a>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="about">
            <div class="container">
                <div class="about-curved-container">
                    <h2 class="about-curved-title">About Supravi Yoga</h2>
                    <div class="about-content">
                        <div class="about-text">
                            <p><strong>Supravi Yoga</strong> is a sanctuary for those seeking balance, strength, and inner peace through the ancient practice of yoga. Founded in 2025 by <strong>Yoga Coach Chowdary Charitha</strong>, our studio brings together traditional wisdom and modern approaches to wellness.</p>
                            <p>We believe that <strong>yoga is for everyone</strong> - regardless of age, fitness level, or experience. Our certified instructors are dedicated to creating a supportive environment where you can explore your practice safely and effectively.</p>
                            <p>At <strong>Supravi Yoga</strong>, we offer a variety of styles including <strong>Hatha, Ashtanga-Vinyasa, and specialized yoga classes</strong>. Each class is carefully designed to help you build strength, increase flexibility, reduce stress, and cultivate mindfulness.</p>
                        </div>
                        <div class="about-image">
                            <img src="https://images.unsplash.com/photo-1599901860904-17e6ed7083a0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Yoga Practice">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Certificates and Awards Section -->
        <section id="certificates" class="certificates">
            <div class="container">
                <h2 class="section-title">Certificates & Awards</h2>
                <div class="certificates-container">
                    <div class="certificate-card">
                        <div class="certificate-image">
                            <img src="200.jpg" alt="Yoga Alliance Certification">
                        </div>
                        <div class="certificate-content">
                            <h3>Bodhi Yoga RYT-200 Certification</h3>
                            <p>Registered Yoga Teacher with 200-hour certification from Bodhi Yoga,Yoga Alliance ensuring the highest standards of yoga instruction and practice.</p>
                        </div>
                    </div>
                    
                    <div class="certificate-card">
                        <div class="certificate-image">
                            <img src="bt.jpg" alt="Excellence in Yoga Award">
                        </div>
                        <div class="certificate-content">
                            <h3>Excellence in Yoga Teaching Award 2023</h3>
                            <p>Recognized for outstanding contribution to yoga education and innovative teaching methodologies in the wellness community.</p>
                        </div>
                    </div>
                    
                    <div class="certificate-card">
                        <div class="certificate-image">
                            <img src="bst.jpg" alt="Meditation Certification">
                        </div>
                        <div class="certificate-content">
                            <h3>Advanced Meditation & Mindfulness </h3>
                            <p>Best Student in meditation techniques and mindfulness practices, enhancing the holistic yoga experience for all students.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Benefits Section -->
        <section id="benefits" class="benefits">
            <div class="container">
                <h2 class="section-title">Benefits of Yoga</h2>
                <div class="benefits-grid">
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <h3>Improves Flexibility</h3>
                        <p>Yoga slowly stretches your muscles and increases your range of motion, helping you move more freely and with less pain.</p>
                    </div>
                    
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3>Reduces Stress</h3>
                        <p>Through meditation and breathing exercises, yoga helps calm the nervous system and quiet the mind, reducing anxiety and stress.</p>
                    </div>
                    
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h3>Builds Strength</h3>
                        <p>Yoga poses require you to support the weight of your own body in new ways, building functional strength throughout your entire body.</p>
                    </div>
                    
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <h3>Improves Posture</h3>
                        <p>Yoga increases body awareness and strengthens core muscles, helping you maintain proper alignment in your daily activities.</p>
                    </div>
                    
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-lungs"></i>
                        </div>
                        <h3>Better Breathing</h3>
                        <p>Pranayama (breath control) teaches you to take deeper, slower breaths which improves lung function and calms the body.</p>
                    </div>
                    
                    <div class="benefit-card">
                        <div class="benefit-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <h3>Better Sleep</h3>
                        <p>Regular yoga practice can help you fall asleep faster, sleep deeper, and wake up more refreshed by reducing stress and calming the mind.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Classes Section -->
        <section id="classes" class="classes">
            <div class="container">
                <h2 class="section-title">Our Classes</h2>
                <div class="classes-container">
                    <div class="class-card">
                        <div class="class-image">
                            <img src="https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Hatha Yoga">
                        </div>
                        <div class="class-content">
                            <h3>Hatha Yoga</h3>
                            <div class="class-info">
                                <span><i class="far fa-clock"></i> 60 min</span>
                                <span><i class="fas fa-user"></i> All Levels</span>
                            </div>
                            <p>A classic approach to yoga that focuses on posture and breathing techniques. Perfect for beginners seeking balance and mindfulness.</p>
                            <button class="btn join-class-btn">Join Class</button>
                        </div>
                    </div>
                    
                    <div class="class-card">
                        <div class="class-image">
                            <img src="as.webp" alt="Ashtanga Vinyasa Flow">
                        </div>
                        <div class="class-content">
                            <h3>Ashtanga - Vinyasa Flow</h3>
                            <div class="class-info">
                                <span><i class="far fa-clock"></i> 75 min</span>
                                <span><i class="fas fa-user"></i> Intermediate</span>
                            </div>
                            <p>A powerful and dynamic practice combining traditional Ashtanga sequences with flowing Vinyasa movements for strength and flexibility.</p>
                            <button class="btn join-class-btn">Join Class</button>
                        </div>
                    </div>
                    
                    <div class="class-card">
                        <div class="class-image">
                            <img src="https://images.unsplash.com/photo-1588286840104-8957b019727f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" alt="Yoga Class">
                        </div>
                        <div class="class-content">
                            <h3>Yoga Class</h3>
                            <div class="class-info">
                                <span><i class="far fa-clock"></i> 45 min</span>
                                <span><i class="fas fa-user"></i> All Levels</span>
                            </div>
                            <p>A comprehensive yoga class combining various styles and techniques to enhance overall wellness, flexibility, and inner peace.</p>
                            <button class="btn join-class-btn">Join Class</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Yoga Postures Section -->
        <section id="postures" class="postures">
            <div class="container">
                <h2 class="section-title">Yoga Postures & Benefits</h2>
                <div class="postures-container">
                    <div class="posture-card">
                        <div class="posture-image">
                            <img src="adhomukhasan.jpeg" alt="Downward Facing Dog">
                        </div>
                        <div class="posture-content">
                            <h3>Downward Facing Dog (Adho Mukha Svanasana)</h3>
                            <p class="posture-benefits">Strengthens arms and legs, stretches shoulders, hamstrings, and calves, calms the mind</p>
                            <div class="posture-fact">
                                <i class="fas fa-lightbulb"></i>
                                <span>Fun Fact: This pose mimics how dogs naturally stretch, helping to energize the entire body while inverting the heart above the head!</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="posture-card">
                        <div class="posture-image">
                            <img src="vriksha.jpg" alt="Tree Pose">
                        </div>
                        <div class="posture-content">
                            <h3>Tree Pose (Vrikshasana)</h3>
                            <p class="posture-benefits">Improves balance, strengthens thighs, calves, and spine, stretches groins and inner thighs</p>
                            <div class="posture-fact">
                                <i class="fas fa-tree"></i>
                                <span>Did you know? Practicing Tree Pose regularly can improve focus and concentration by training your mind to stay present and balanced.</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="posture-card">
                        <div class="posture-image">
                            <img src="veera.jpg" alt="Warrior II">
                        </div>
                        <div class="posture-content">
                            <h3>Warrior II (Virabhadrasana II)</h3>
                            <p class="posture-benefits">Strengthens legs and arms, increases stamina, improves balance and concentration</p>
                            <div class="posture-fact">
                                <i class="fas fa-fist-raised"></i>
                                <span>Ancient Wisdom: Named after the fierce warrior Virabhadra, this pose builds inner strength and confidence while teaching grace under pressure.</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="posture-card">
                        <div class="posture-image">
                            <img src="bala.jpg" alt="Child's Pose">
                        </div>
                        <div class="posture-content">
                            <h3>Child's Pose (Balasana)</h3>
                            <p class="posture-benefits">Gently stretches hips, thighs, and ankles, relieves back and neck pain, calms the mind</p>
                            <div class="posture-fact">
                                <i class="fas fa-heart"></i>
                                <span>Healing Touch: This restorative pose activates the parasympathetic nervous system, naturally reducing stress hormones and promoting deep relaxation.</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="posture-card">
                        <div class="posture-image">
                            <img src="bhujang.jpg" alt="Cobra Pose">
                        </div>
                        <div class="posture-content">
                            <h3>Cobra Pose (Bhujangasana)</h3>
                            <p class="posture-benefits">Strengthens the spine, stretches chest and lungs, improves flexibility of the upper and middle back</p>
                            <div class="posture-fact">
                                <i class="fas fa-expand-arrows-alt"></i>
                                <span>Energy Boost: This backbend opens the heart chakra and can naturally boost energy levels while improving posture from daily sitting.</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="posture-card">
                        <div class="posture-image">
                            <img src="setu.jpg" alt="Bridge Pose">
                        </div>
                        <div class="posture-content">
                            <h3>Bridge Pose (Setu Bandhasana)</h3>
                            <p class="posture-benefits">Stretches chest, neck, and spine, calms the brain, reduces anxiety, improves digestion</p>
                            <div class="posture-fact">
                                <i class="fas fa-brain"></i>
                                <span>Mind-Body Connection: This gentle inversion increases blood flow to the brain, potentially improving memory and mental clarity.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="testimonials">
            <div class="container">
                <h2 class="section-title">What Our Students Say</h2>
                <div class="testimonial-container">
                    <div class="testimonial">
                        <p class="testimonial-text">"Supravi Yoga has transformed my life. I've been practicing for 6 months and my flexibility, strength, and mental clarity have improved dramatically. The online classes are so convenient!"</p>
                        <p class="testimonial-author">- Vasavi</p>
                    </div>
                    
                    <div class="testimonial">
                        <p class="testimonial-text">"The instructors at Supravi Yoga are incredible. They provide modifications for all levels and truly care about their students' progress. I've never felt stronger or more centered."</p>
                        <p class="testimonial-author">- Sushmitha</p>
                    </div>
                    
                    <div class="testimonial">
                        <p class="testimonial-text">"As a beginner, I was nervous about starting yoga, but the welcoming environment and detailed instructions made me feel comfortable right away. Now I'm hooked!"</p>
                        <p class="testimonial-author">- Naveen</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- User Dashboard -->
    <div id="userDashboard" class="dashboard">
        <div class="dashboard-header">
            <div class="container">
                <div class="dashboard-title">
                    <div class="dashboard-logo">Supravi Yoga</div>
                    <div class="dashboard-tagline">- Essence of Life</div>
                </div>
                <div class="dashboard-user-info">
                    <div class="dashboard-user-name" id="dashboardUserName"></div>
                    <button class="btn btn-danger logout-btn" id="dashboardLogoutBtn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- Welcome Message -->
            <div style="background: rgba(255, 255, 255, 0.9); padding: 25px; border-radius: 15px; margin: 20px 0; text-align: center; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);">
                <h3 style="color: var(--primary); margin-bottom: 10px;">🙏 Welcome to Your Yoga Journey!</h3>
                <p style="color: #555; font-size: 1.1rem;">Namaste! Ready to find your inner peace and strength? Your personalized yoga experience awaits below.</p>
            </div>

            <!-- Admin Panel (only visible to admins) -->
            <div id="adminPanel" class="admin-panel" style="display: none;">
                <h3 class="admin-title">🔥 Admin Control Panel 🔥</h3>
                <div class="admin-controls">
                    <div class="admin-section">
                        <h4>📊 Statistics</h4>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-number" id="totalUsers">0</div>
                                <div class="stat-label">Total Users</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="onlineUsers">0</div>
                                <div class="stat-label">Online Now</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-number" id="totalClasses">3</div>
                                <div class="stat-label">Total Classes</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="admin-section">
                        <h4>➕ Add New Class</h4>
                        <form class="admin-form" id="addClassForm">
                            <input type="text" id="className" placeholder="Class Name" required>
                            <textarea id="classDescription" placeholder="Class Description" rows="3" required></textarea>
                            <input type="text" id="classDuration" placeholder="Duration (e.g., 60 min)" required>
                            <input type="text" id="classLevel" placeholder="Level (e.g., Beginner)" required>
                            <input type="number" id="classPrice" placeholder="Price" min="1" required>
                            <input type="url" id="classImage" placeholder="Image URL" required>
                            <input type="url" id="classZoomLink" placeholder="Zoom Link" required>
                            <button type="submit">Add Class</button>
                        </form>
                    </div>
                    
                    <div class="admin-section">
                        <h4>🔗 Update Zoom Links</h4>
                        <form class="admin-form" id="updateZoomForm">
                            <select id="zoomClassSelect" required>
                                <option value="">Select a class</option>
                            </select>
                            <input type="url" id="newZoomLink" placeholder="New Zoom Link" required>
                            <button type="submit">Update Zoom Link</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Yoga Quotes Slider -->
            <div class="yoga-quotes-container">
                <div class="yoga-quote active">
                    <div class="quote-text">"Yoga is not about touching your toes. It is about what you learn on the way down."</div>
                    <div class="quote-author">- Judith Hanson Lasater</div>
                </div>
                <div class="yoga-quote">
                    <div class="quote-text">"The success of yoga lies not in the ability to attain the pose, but in how it makes us better human beings."</div>
                    <div class="quote-author">- B.K.S. Iyengar</div>
                </div>
                <div class="yoga-quote">
                    <div class="quote-text">"Yoga is a light, which once lit will never dim. The better your practice, the brighter your flame."</div>
                    <div class="quote-author">- B.K.S. Iyengar</div>
                </div>
                <div class="yoga-quote">
                    <div class="quote-text">"The nature of yoga is to shine the light of awareness into the darkest corners of the body."</div>
                    <div class="quote-author">- Jason Crandell</div>
                </div>
                <div class="yoga-quote">
                    <div class="quote-text">"Yoga is not a work-out, it is a work-in. And this is the point of spiritual practice; to make us teachable."</div>
                    <div class="quote-author">- Rolf Gates</div>
                </div>
            </div>

            <nav class="dashboard-nav">
                <div class="dashboard-tabs">
                    <button class="dashboard-tab active" data-tab="classes">My Classes</button>
                    <button class="dashboard-tab" data-tab="profile">Profile</button>
                    <button class="dashboard-tab" data-tab="payments">Payment History</button>
                </div>
            </nav>

            <!-- Classes Tab -->
            <div class="dashboard-content active" id="classesTab">
                <div class="loading" id="classesLoading">
                    <div class="spinner"></div>
                    <p>Loading your classes...</p>
                </div>
                <div class="class-grid" id="userClasses">
                    <!-- Classes will be populated dynamically -->
                </div>
            </div>

            <!-- Profile Tab -->
            <div class="dashboard-content" id="profileTab">
                <div class="profile-section">
                    <h3>Profile Information</h3>
                    <form id="profileForm">
                        <div class="form-group">
                            <label for="profileName">Full Name</label>
                            <input type="text" id="profileName" placeholder="Enter your full name">
                            <small style="color: #666; font-size: 0.9rem;">Click to edit your name</small>
                        </div>
                        <div class="form-group">
                            <label for="profileEmail">Email</label>
                            <input type="email" id="profileEmail" readonly>
                        </div>
                        <button type="button" class="btn" id="saveProfileBtn" style="display: none;">Save Changes</button>
                    </form>
                </div>
            </div>

            <!-- Payments Tab -->
            <div class="dashboard-content" id="paymentsTab">
                <div class="payment-history">
                    <h3>Payment History</h3>
                    <div id="paymentList">
                        <p>No payment history available.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="auth-form">
                <h2>Login to Your Account</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" required>
                    </div>
                    <button type="submit" class="btn" style="width: 100%;">Login</button>
                    <div class="error-message" id="loginError"></div>
                    <div class="success-message" id="loginSuccess"></div>
                    <div class="form-footer">
                        <p>Don't have an account? <a href="#" id="switchToSignup">Sign Up</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal" id="signupModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="auth-form">
                <h2>Create an Account</h2>
                <form id="signupForm">
                    <div class="form-group">
                        <label for="signupName">Full Name</label>
                        <input type="text" id="signupName" required>
                    </div>
                    <div class="form-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" id="signupEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" required>
                    </div>
                    <div class="form-group">
                        <label for="signupConfirmPassword">Confirm Password</label>
                        <input type="password" id="signupConfirmPassword" required>
                    </div>
                    <button type="submit" class="btn" id="sendOtpBtn" style="width: 100%;">Send OTP</button>
                    
                    <div class="otp-section" id="otpSection">
                        <div class="form-group">
                            <label for="otpInput">Enter OTP</label>
                            <input type="text" id="otpInput" class="otp-input" maxlength="6" placeholder="000000" required>
                        </div>
                        <button type="button" class="btn" id="verifyOtpBtn" style="width: 100%;">Verify OTP & Sign Up</button>
                        <div style="text-align: center; margin-top: 10px;">
                            <span class="resend-otp" id="resendOtp">Resend OTP</span>
                        </div>
                    </div>
                    
                    <div class="error-message" id="signupError"></div>
                    <div class="success-message" id="signupSuccess"></div>
                    <div class="form-footer">
                        <p>Already have an account? <a href="#" id="switchToLogin">Login</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="payment-info">
                <h2>Join <span id="paymentClassName"></span></h2>
                <div class="payment-amount">₹1</div>
                <p>Complete the payment to unlock this class and get access to live Zoom sessions!</p>
                
                <div class="payment-instructions">
                    <h4>Payment Instructions:</h4>
                    <ol>
                        <li>Click the "Pay Now" button below</li>
                        <li>Complete the payment of ₹1</li>
                        <li>Take a screenshot of the payment confirmation</li>
                        <li>Come back to this page and click "I have completed payment"</li>
                        <li>Your class will be unlocked automatically!</li>
                    </ol>
                </div>

                <a href="https://razorpay.me/@smartclasses7445" target="_blank" class="razorpay-link">
                    Pay Now - ₹1
                </a>

                <div style="margin: 20px 0;">
                    <button class="btn btn-success" id="confirmPaymentBtn" style="width: 100%;">
                        I have completed payment
                    </button>
                </div>

                <div class="loading" id="paymentLoading">
                    <div class="spinner"></div>
                    <p>Processing your payment...</p>
                </div>

                <div class="error-message" id="paymentError"></div>
                <div class="success-message" id="paymentSuccess"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer id="mainFooter">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Supravi Yoga</h3>
                    <p>Find your balance, peace, and happiness through the ancient practice of yoga.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="#home" onclick="showLandingPage()">Home</a></li>
                        <li><a href="#about" onclick="showLandingPage()">About</a></li>
                        <li><a href="#certificates" onclick="showLandingPage()">Certificates</a></li>
                        <li><a href="#benefits" onclick="showLandingPage()">Benefits</a></li>
                        <li><a href="#classes" onclick="showLandingPage()">Classes</a></li>
                        <li><a href="#postures" onclick="showLandingPage()">Postures</a></li>
                        <li><a href="#testimonials" onclick="showLandingPage()">Testimonials</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li><i class="fas fa-map-marker-alt"></i> Supraviyoga, Hyderabad</li>
                        <li><i class="fas fa-phone"></i> +91 7997142404</li>
                        <li><i class="fas fa-envelope"></i> supraviyoga@gmail.com</li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Newsletter</h3>
                    <p>Subscribe to our newsletter for tips, updates, and special offers.</p>
                    <form>
                        <div class="form-group">
                            <input type="email" placeholder="Your Email" required>
                        </div>
                        <button type="submit" class="btn">Subscribe</button>
                    </form>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 Supravi Yoga. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Initialize EmailJS with your service credentials
        emailjs.init('JMF-_icoUbndhxlSq');

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBtc95WGLAhBvOQT3mMAOe8yyPMcyYrffM",
            authDomain: "supravi-yoga.firebaseapp.com",
            projectId: "supravi-yoga",
            storageBucket: "supravi-yoga.firebasestorage.app",
            messagingSenderId: "849453703842",
            appId: "1:849453703842:web:b5205883d23034c420edfb",
            measurementId: "G-5X5L4N2GQH"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const analytics = firebase.analytics();

        // Track page view
        analytics.logEvent('page_view', {
            page_title: 'Supravi Yoga Home',
            page_location: window.location.href
        });

        // Admin emails
        const adminEmails = ['supraviyoga@gmail.com', 'vishallnareddy@gmail.com'];

        // Global variables for OTP and payment
        let generatedOtp = '';
        let pendingSignupData = null;
        let currentPaymentClass = null;
        let currentUser = null;
        let isAdmin = false;

        // Yoga quotes rotation
        const yogaQuotes = [
            {
                text: "Yoga is not about touching your toes. It is about what you learn on the way down.",
                author: "Judith Hanson Lasater"
            },
            {
                text: "The success of yoga lies not in the ability to attain the pose, but in how it makes us better human beings.",
                author: "B.K.S. Iyengar"
            },
            {
                text: "Yoga is a light, which once lit will never dim. The better your practice, the brighter your flame.",
                author: "B.K.S. Iyengar"
            },
            {
                text: "The nature of yoga is to shine the light of awareness into the darkest corners of the body.",
                author: "Jason Crandell"
            },
            {
                text: "Yoga is not a work-out, it is a work-in. And this is the point of spiritual practice; to make us teachable.",
                author: "Rolf Gates"
            },
            {
                text: "Yoga means union, the union of body, mind, and spirit. It's about connecting with your true self.",
                author: "Traditional Wisdom"
            },
            {
                text: "The ultimate goal of yoga is to always observe things as they are, and to allow everything to exist as it is.",
                author: "Kausthub Desikachar"
            },
            {
                text: "Yoga is a way of moving into stillness in order to experience the truth of who you are.",
                author: "Erich Schiffmann"
            },
            {
                text: "In truth, yoga doesn't take time – it gives time.",
                author: "Ganga White"
            },
            {
                text: "Yoga is not about self-improvement, it's about self-acceptance.",
                author: "Gurmukh Kaur Khalsa"
            },
            {
                text: "The word 'yoga' comes from 'yuj' meaning to unite or bind. Regular practice unites body, breath, and mind.",
                author: "Yoga Philosophy"
            },
            {
                text: "The pose begins when you want to leave it. Breathe through the discomfort and find your edge.",
                author: "Modern Yoga Wisdom"
            },
            {
                text: "Yoga teaches us to cure what need not be endured and endure what cannot be cured.",
                author: "B.K.S. Iyengar"
            },
            {
                text: "The rhythm of the body, the melody of the mind, and the harmony of the soul create the dance of yoga.",
                author: "B.K.S. Iyengar"
            },
            {
                text: "Yoga is like music. The rhythm of the body, the melody of the mind, and the harmony of the soul create the symphony of life.",
                author: "B.K.S. Iyengar"
            }
        ];

        let currentQuoteIndex = 0;
        let quoteInterval;
        let onlineUsersInterval;

        function rotateQuotes() {
            const quotes = document.querySelectorAll('.yoga-quote');
            if (quotes.length === 0) return;

            quotes.forEach(quote => quote.classList.remove('active'));
            
            currentQuoteIndex = (currentQuoteIndex + 1) % quotes.length;
            quotes[currentQuoteIndex].classList.add('active');
        }

        function startQuoteRotation() {
            if (quoteInterval) clearInterval(quoteInterval);
            quoteInterval = setInterval(rotateQuotes, 4000);
        }

        function stopQuoteRotation() {
            if (quoteInterval) {
                clearInterval(quoteInterval);
                quoteInterval = null;
            }
        }

        // Class data with Zoom links - now stored in Firestore
        let classesData = [
            {
                id: 'hatha-yoga',
                name: 'Hatha Yoga',
                description: 'A classic approach to yoga that focuses on posture and breathing techniques. Perfect for beginners seeking balance and mindfulness.',
                duration: '60 min',
                level: 'All Levels',
                price: 1,
                image: 'https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                zoomLink: 'https://zoom.us/j/1234567890?pwd=example1'
            },
            {
                id: 'ashtanga-vinyasa-flow',
                name: 'Ashtanga - Vinyasa Flow',
                description: 'A powerful and dynamic practice combining traditional Ashtanga sequences with flowing Vinyasa movements for strength and flexibility.',
                duration: '75 min',
                level: 'Intermediate',
                price: 1,
                image: 'as.webp',
                zoomLink: 'https://zoom.us/j/1234567891?pwd=example2'
            },
            {
                id: 'yoga-class',
                name: 'Yoga Class',
                description: 'A comprehensive yoga class combining various styles and techniques to enhance overall wellness, flexibility, and inner peace.',
                duration: '45 min',
                level: 'All Levels',
                price: 1,
                image: 'http.com/photo-1588286840104-8957b019727f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80',
                zoomLink: 'https://zoom.us/j/1234567892?pwd=example3'
            }
        ];

        // Initialize Firestore classes collection with default data
        async function initializeClasses() {
            try {
                const classesCollection = await db.collection('classes').get();
                if (classesCollection.empty) {
                    // Initialize with default classes
                    for (const classData of classesData) {
                        await db.collection('classes').doc(classData.id).set(classData);
                    }
                } else {
                    // Load classes from Firestore
                    classesData = [];
                    classesCollection.forEach(doc => {
                        classesData.push({
                            id: doc.id,
                            ...doc.data()
                        });
                    });
                }
            } catch (error) {
                console.error('Error initializing classes:', error);
            }
        }

        // DOM Elements
        const mobileLoginBtn = document.getElementById('mobileLoginBtn');
        const mobileSignupBtn = document.getElementById('mobileSignupBtn');
        
        const loginModal = document.getElementById('loginModal');
        const signupModal = document.getElementById('signupModal');
        const paymentModal = document.getElementById('paymentModal');
        const closeModalButtons = document.querySelectorAll('.close-modal');
        const switchToLogin = document.getElementById('switchToLogin');
        const switchToSignup = document.getElementById('switchToSignup');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const loginError = document.getElementById('loginError');
        const loginSuccess = document.getElementById('loginSuccess');
        const signupError = document.getElementById('signupError');
        const signupSuccess = document.getElementById('signupSuccess');
        const userInfo = document.getElementById('userInfo');
        const userName = document.getElementById('userName');
        const userAvatar = document.getElementById('userAvatar');
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.getElementById('navLinks');
        const sendOtpBtn = document.getElementById('sendOtpBtn');
        const otpSection = document.getElementById('otpSection');
        const verifyOtpBtn = document.getElementById('verifyOtpBtn');
        const otpInput = document.getElementById('otpInput');
        const resendOtp = document.getElementById('resendOtp');

        // Dashboard elements
        const landingPage = document.getElementById('landingPage');
        const userDashboard = document.getElementById('userDashboard');
        const dashboardTabs = document.querySelectorAll('.dashboard-tab');
        const dashboardContents = document.querySelectorAll('.dashboard-content');
        const userClasses = document.getElementById('userClasses');
        const classesLoading = document.getElementById('classesLoading');

        // Profile elements
        const profileName = document.getElementById('profileName');
        const profileEmail = document.getElementById('profileEmail');
        const saveProfileBtn = document.getElementById('saveProfileBtn');

        // Payment elements
        const confirmPaymentBtn = document.getElementById('confirmPaymentBtn');
        const paymentLoading = document.getElementById('paymentLoading');
        const paymentError = document.getElementById('paymentError');
        const paymentSuccess = document.getElementById('paymentSuccess');

        // Admin elements
        const adminPanel = document.getElementById('adminPanel');
        const adminIndicator = document.getElementById('adminIndicator');
        const onlineCount = document.getElementById('onlineCount');
        const addClassForm = document.getElementById('addClassForm');
        const updateZoomForm = document.getElementById('updateZoomForm');
        const zoomClassSelect = document.getElementById('zoomClassSelect');
        const totalUsersSpan = document.getElementById('totalUsers');
        const onlineUsersSpan = document.getElementById('onlineUsers');

        // Generate random OTP
        function generateOtp() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }

        // Send OTP via EmailJS
        function sendOtpEmail(email, name, otp) {
            const templateParams = {
                to_email: email,
                to_name: name,
                otp_code: otp,
                from_name: 'Supravi Yoga'
            };

            return emailjs.send('service_w4px03n', 'template_0lwjboh', templateParams);
        }

        // Check if user is admin
        function checkAdminStatus(email) {
            return adminEmails.includes(email);
        }

        // Update user online status
        async function updateOnlineStatus(userId, isOnline) {
            try {
                if (isOnline) {
                    await db.collection('online_users').doc(userId).set({
                        email: currentUser.email,
                        name: currentUser.displayName || currentUser.email,
                        lastSeen: firebase.firestore.FieldValue.serverTimestamp()
                    });
                } else {
                    await db.collection('online_users').doc(userId).delete();
                }
            } catch (error) {
                console.error('Error updating online status:', error);
            }
        }

        // Get online users count
        async function getOnlineUsersCount() {
            try {
                const onlineUsersSnapshot = await db.collection('online_users').get();
                return onlineUsersSnapshot.size;
            } catch (error) {
                console.error('Error getting online users count:', error);
                return 0;
            }
        }

        // Get total users count
        async function getTotalUsersCount() {
            try {
                const usersSnapshot = await db.collection('users').get();
                return usersSnapshot.size;
            } catch (error) {
                console.error('Error getting total users count:', error);
                return 0;
            }
        }

        // Update admin statistics
        async function updateAdminStats() {
            if (!isAdmin) return;
            
            const totalUsers = await getTotalUsersCount();
            const onlineUsers = await getOnlineUsersCount();
            
            totalUsersSpan.textContent = totalUsers;
            onlineUsersSpan.textContent = onlineUsers;
            
            if (onlineUsers > 0) {
                onlineCount.textContent = `👥 ${onlineUsers} online`;
                onlineCount.style.display = 'inline';
            } else {
                onlineCount.style.display = 'none';
            }
        }

        // Initialize user data in Firestore
        async function initializeUserData(user) {
            try {
                const userDoc = await db.collection('users').doc(user.uid).get();
                
                if (!userDoc.exists) {
                    await db.collection('users').doc(user.uid).set({
                        name: user.displayName || '',
                        email: user.email,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                        unlockedClasses: [],
                        paymentHistory: []
                    });
                }
            } catch (error) {
                console.error('Error initializing user data:', error);
            }
        }

        // Update user name in Firestore
        async function updateUserName(userId, newName) {
            try {
                await db.collection('users').doc(userId).update({
                    name: newName
                });
                
                if (auth.currentUser) {
                    await auth.currentUser.updateProfile({
                        displayName: newName
                    });
                }
                
                return true;
            } catch (error) {
                console.error('Error updating user name:', error);
                return false;
            }
        }

        // Get user's unlocked classes
        async function getUserUnlockedClasses(userId) {
            try {
                const userDoc = await db.collection('users').doc(userId).get();
                if (userDoc.exists) {
                    return userDoc.data().unlockedClasses || [];
                }
                return [];
            } catch (error) {
                console.error('Error getting unlocked classes:', error);
                return [];
            }
        }

        // Unlock a class for user
        async function unlockClassForUser(userId, classId) {
            try {
                const userRef = db.collection('users').doc(userId);
                
                await userRef.update({
                    unlockedClasses: firebase.firestore.FieldValue.arrayUnion(classId),
                    paymentHistory: firebase.firestore.FieldValue.arrayUnion({
                        classId: classId,
                        className: classesData.find(c => c.id === classId)?.name || 'Unknown',
                        amount: 1,
                        date: firebase.firestore.FieldValue.serverTimestamp(),
                        paymentMethod: 'Razorpay'
                    })
                });

                analytics.logEvent('class_unlocked', {
                    user_id: userId,
                    class_id: classId
                });

                return true;
            } catch (error) {
                console.error('Error unlocking class:', error);
                return false;
            }
        }

        // Add new class (admin only)
        async function addClass(classData) {
            try {
                const classId = classData.name.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
                await db.collection('classes').doc(classId).set({
                    ...classData,
                    id: classId,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                // Update local classes data
                classesData.push({
                    id: classId,
                    ...classData
                });
                
                return true;
            } catch (error) {
                console.error('Error adding class:', error);
                return false;
            }
        }

        // Update zoom link (admin only)
        async function updateZoomLink(classId, newZoomLink) {
            try {
                await db.collection('classes').doc(classId).update({
                    zoomLink: newZoomLink
                });
                
                // Update local classes data
                const classIndex = classesData.findIndex(c => c.id === classId);
                if (classIndex !== -1) {
                    classesData[classIndex].zoomLink = newZoomLink;
                }
                
                return true;
            } catch (error) {
                console.error('Error updating zoom link:', error);
                return false;
            }
        }

        // Show/Hide Dashboard
        function showDashboard() {
            landingPage.style.display = 'none';
            document.getElementById('mainFooter').style.display = 'none';
            userDashboard.classList.add('active');
            startQuoteRotation();
            loadUserDashboard();
        }

        function showLandingPage() {
            landingPage.style.display = 'block';
            document.getElementById('mainFooter').style.display = 'block';
            userDashboard.classList.remove('active');
            stopQuoteRotation();
        }

        // Load user dashboard data
        async function loadUserDashboard() {
            if (!auth.currentUser) return;

            // Update welcome message with user name
            const userDoc = await db.collection('users').doc(auth.currentUser.uid).get();
            const userData = userDoc.exists ? userDoc.data() : {};
            const displayName = userData.name || auth.currentUser.displayName || auth.currentUser.email.split('@')[0];
            
            document.getElementById('dashboardUserName').textContent = displayName;

            // Load classes from Firestore
            await loadClasses();

            classesLoading.style.display = 'block';
            const unlockedClasses = await getUserUnlockedClasses(auth.currentUser.uid);
            
            // Render classes
            userClasses.innerHTML = '';
            
            classesData.forEach(classData => {
                const isUnlocked = unlockedClasses.includes(classData.id);
                
                const classCard = document.createElement('div');
                classCard.className = 'dashboard-class-card';
                classCard.innerHTML = `
                    <img src="${classData.image}" alt="${classData.name}">
                    <div class="dashboard-card-content">
                        <span class="class-status ${isUnlocked ? 'status-unlocked' : 'status-locked'}">
                            ${isUnlocked ? '✅ Unlocked' : '🔒 Locked'}
                        </span>
                        <h3>${classData.name}</h3>
                        <p>${classData.description}</p>
                        <div class="class-info">
                            <span><i class="far fa-clock"></i> ${classData.duration}</span>
                            <span><i class="fas fa-user"></i> ${classData.level}</span>
                        </div>
                        <div class="class-price">₹${classData.price}</div>
                        ${isUnlocked ? 
                            `<a href="${classData.zoomLink}" target="_blank" class="zoom-link">
                                <i class="fas fa-video"></i> Join Zoom Class
                            </a>` :
                            `<button class="btn unlock-class-btn" data-class-id="${classData.id}">
                                Join Now - ₹${classData.price}
                            </button>`
                        }
                        ${isAdmin ? 
                            `<a href="${classData.zoomLink}" target="_blank" class="admin-zoom-link">
                                <i class="fas fa-crown"></i> Admin Access
                            </a>` : ''
                        }
                    </div>
                `;
                
                userClasses.appendChild(classCard);
            });

            // Add event listeners to unlock buttons
            document.querySelectorAll('.unlock-class-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const classId = e.target.getAttribute('data-class-id');
                    showPaymentModal(classId);
                });
            });

            classesLoading.style.display = 'none';

            // Update profile info
            profileName.value = userData.name || auth.currentUser.displayName || '';
            profileEmail.value = auth.currentUser.email || '';
        }

        // Load classes from Firestore
        async function loadClasses() {
            try {
                const classesSnapshot = await db.collection('classes').get();
                classesData = [];
                classesSnapshot.forEach(doc => {
                    classesData.push({
                        id: doc.id,
                        ...doc.data()
                    });
                });
            } catch (error) {
                console.error('Error loading classes:', error);
            }
        }

        // Update zoom class select dropdown
        function updateZoomClassSelect() {
            zoomClassSelect.innerHTML = '<option value="">Select a class</option>';
            classesData.forEach(classData => {
                const option = document.createElement('option');
                option.value = classData.id;
                option.textContent = classData.name;
                zoomClassSelect.appendChild(option);
            });
        }

        // Profile name editing
        profileName.addEventListener('input', () => {
            saveProfileBtn.style.display = 'block';
        });

        saveProfileBtn.addEventListener('click', async () => {
            if (!auth.currentUser) return;

            const newName = profileName.value.trim();
            if (!newName) {
                alert('Please enter a valid name');
                return;
            }

            saveProfileBtn.textContent = 'Saving...';
            saveProfileBtn.disabled = true;

            const success = await updateUserName(auth.currentUser.uid, newName);
            
            if (success) {
                saveProfileBtn.style.display = 'none';
                userName.textContent = newName;
                userAvatar.textContent = newName.charAt(0).toUpperCase();
                document.getElementById('dashboardUserName').textContent = newName;
                alert('Profile updated successfully!');
            } else {
                alert('Failed to update profile. Please try again.');
            }

            saveProfileBtn.textContent = 'Save Changes';
            saveProfileBtn.disabled = false;
        });

        // Admin form handlers
        addClassForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!isAdmin) {
                alert('Admin access required');
                return;
            }
            
            const formData = new FormData(e.target);
            const classData = {
                name: formData.get('className') || document.getElementById('className').value,
                description: formData.get('classDescription') || document.getElementById('classDescription').value,
                duration: formData.get('classDuration') || document.getElementById('classDuration').value,
                level: formData.get('classLevel') || document.getElementById('classLevel').value,
                price: parseInt(formData.get('classPrice') || document.getElementById('classPrice').value),
                image: formData.get('classImage') || document.getElementById('classImage').value,
                zoomLink: formData.get('classZoomLink') || document.getElementById('classZoomLink').value
            };
            
            const success = await addClass(classData);
            
            if (success) {
                alert('Class added successfully!');
                e.target.reset();
                updateZoomClassSelect();
                loadUserDashboard();
            } else {
                alert('Failed to add class. Please try again.');
            }
        });

        updateZoomForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!isAdmin) {
                alert('Admin access required');
                return;
            }
            
            const classId = zoomClassSelect.value;
            const newZoomLink = document.getElementById('newZoomLink').value;
            
            if (!classId || !newZoomLink) {
                alert('Please select a class and enter a zoom link');
                return;
            }
            
            const success = await updateZoomLink(classId, newZoomLink);
            
            if (success) {
                alert('Zoom link updated successfully!');
                e.target.reset();
                loadUserDashboard();
            } else {
                alert('Failed to update zoom link. Please try again.');
            }
        });

        // Show payment modal
        function showPaymentModal(classId) {
            const classData = classesData.find(c => c.id === classId);
            if (!classData) return;

            currentPaymentClass = classId;
            document.getElementById('paymentClassName').textContent = classData.name;
            paymentModal.style.display = 'flex';
            
            paymentLoading.style.display = 'none';
            paymentError.style.display = 'none';
            paymentSuccess.style.display = 'none';
            confirmPaymentBtn.disabled = false;

            analytics.logEvent('payment_modal_opened', {
                class_id: classId,
                class_name: classData.name
            });
        }

        // Toggle Mobile Menu
        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        // Show Login Modal
        const showLoginModal = () => {
            signupModal.style.display = 'none';
            loginModal.style.display = 'flex';
            navLinks.classList.remove('active');
            analytics.logEvent('login_attempt_started');
        };

        // Show Signup Modal
        const showSignupModal = () => {
            loginModal.style.display = 'none';
            signupModal.style.display = 'flex';
            navLinks.classList.remove('active');
            otpSection.style.display = 'none';
            sendOtpBtn.textContent = 'Send OTP';
            analytics.logEvent('signup_attempt_started');
        };

        // Close Modal
        const closeModal = () => {
            loginModal.style.display = 'none';
            signupModal.style.display = 'none';
            paymentModal.style.display = 'none';
            otpSection.style.display = 'none';
            sendOtpBtn.textContent = 'Send OTP';
            generatedOtp = '';
            pendingSignupData = null;
            currentPaymentClass = null;
        };

        // Event Listeners
        mobileLoginBtn.addEventListener('click', showLoginModal);
        mobileSignupBtn.addEventListener('click', showSignupModal);
        switchToLogin.addEventListener('click', showLoginModal);
        switchToSignup.addEventListener('click', showSignupModal);

        closeModalButtons.forEach(button => {
            button.addEventListener('click', closeModal);
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === loginModal) closeModal();
            if (e.target === signupModal) closeModal();
            if (e.target === paymentModal) closeModal();
        });

        // Dashboard tabs
        dashboardTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.getAttribute('data-tab');
                
                dashboardTabs.forEach(t => t.classList.remove('active'));
                dashboardContents.forEach(c => c.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(targetTab + 'Tab').classList.add('active');
            });
        });

        // Login Form Submission
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            loginError.style.display = 'none';
            loginSuccess.style.display = 'none';
            
            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    loginSuccess.textContent = 'Login successful!';
                    loginSuccess.style.display = 'block';
                    analytics.logEvent('login', {
                        method: 'email'
                    });
                    setTimeout(() => {
                        closeModal();
                        showDashboard();
                    }, 1500);
                })
                .catch((error) => {
                    loginError.textContent = error.message;
                    loginError.style.display = 'block';
                    analytics.logEvent('login_failed', {
                        error_code: error.code
                    });
                });
        });

        // Send OTP Button Click
        sendOtpBtn.addEventListener('click', (e) => {
            e.preventDefault();
            
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            
            signupError.style.display = 'none';
            signupSuccess.style.display = 'none';
            
            if (!name || !email || !password || !confirmPassword) {
                signupError.textContent = 'Please fill in all fields';
                signupError.style.display = 'block';
                return;
            }
            
            if (password !== confirmPassword) {
                signupError.textContent = 'Passwords do not match';
                signupError.style.display = 'block';
                return;
            }
            
            if (password.length < 6) {
                signupError.textContent = 'Password should be at least 6 characters';
                signupError.style.display = 'block';
                return;
            }

            pendingSignupData = { name, email, password };
            
            generatedOtp = generateOtp();
            sendOtpBtn.textContent = 'Sending OTP...';
            sendOtpBtn.disabled = true;
            
            sendOtpEmail(email, name, generatedOtp)
                .then((response) => {
                    signupSuccess.textContent = 'OTP sent successfully! Check your email.';
                    signupSuccess.style.display = 'block';
                    otpSection.style.display = 'block';
                    sendOtpBtn.textContent = 'OTP Sent';
                    analytics.logEvent('otp_sent', {
                        email: email
                    });
                })
                .catch((error) => {
                    signupError.textContent = 'Failed to send OTP. Please try again.';
                    signupError.style.display = 'block';
                    sendOtpBtn.textContent = 'Send OTP';
                    sendOtpBtn.disabled = false;
                    console.error('EmailJS Error:', error);
                });
        });

        // Verify OTP and Sign Up
        verifyOtpBtn.addEventListener('click', () => {
            const enteredOtp = otpInput.value.trim();
            
            signupError.style.display = 'none';
            signupSuccess.style.display = 'none';
            
            if (!enteredOtp) {
                signupError.textContent = 'Please enter the OTP';
                signupError.style.display = 'block';
                return;
            }
            
            if (enteredOtp !== generatedOtp) {
                signupError.textContent = 'Invalid OTP. Please try again.';
                signupError.style.display = 'block';
                return;
            }
            
            if (!pendingSignupData) {
                signupError.textContent = 'Session expired. Please try again.';
                signupError.style.display = 'block';
                return;
            }
            
            verifyOtpBtn.textContent = 'Creating Account...';
            verifyOtpBtn.disabled = true;
            
            auth.createUserWithEmailAndPassword(pendingSignupData.email, pendingSignupData.password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    return user.updateProfile({
                        displayName: pendingSignupData.name
                    });
                })
                .then(() => {
                    return initializeUserData(auth.currentUser);
                })
                .then(() => {
                    signupSuccess.textContent = 'Account created successfully!';
                    signupSuccess.style.display = 'block';
                    analytics.logEvent('sign_up', {
                        method: 'email'
                    });
                    setTimeout(() => {
                        closeModal();
                        showDashboard();
                    }, 1500);
                })
                .catch((error) => {
                    signupError.textContent = error.message;
                    signupError.style.display = 'block';
                    verifyOtpBtn.textContent = 'Verify OTP & Sign Up';
                    verifyOtpBtn.disabled = false;
                    analytics.logEvent('signup_failed', {
                        error_code: error.code
                    });
                });
        });

        // Resend OTP
        resendOtp.addEventListener('click', () => {
            if (!pendingSignupData) {
                signupError.textContent = 'Session expired. Please try again.';
                signupError.style.display = 'block';
                return;
            }
            
            generatedOtp = generateOtp();
            resendOtp.textContent = 'Sending...';
            
            sendOtpEmail(pendingSignupData.email, pendingSignupData.name, generatedOtp)
                .then((response) => {
                    signupSuccess.textContent = 'New OTP sent successfully!';
                    signupSuccess.style.display = 'block';
                    resendOtp.textContent = 'Resend OTP';
                    analytics.logEvent('otp_resent', {
                        email: pendingSignupData.email
                    });
                })
                .catch((error) => {
                    signupError.textContent = 'Failed to resend OTP. Please try again.';
                    signupError.style.display = 'block';
                    resendOtp.textContent = 'Resend OTP';
                    console.error('EmailJS Error:', error);
                });
        });

        // Confirm Payment
        confirmPaymentBtn.addEventListener('click', async () => {
            if (!currentPaymentClass || !auth.currentUser) return;

            paymentError.style.display = 'none';
            paymentSuccess.style.display = 'none';
            paymentLoading.style.display = 'block';
            confirmPaymentBtn.disabled = true;

            try {
                const success = await unlockClassForUser(auth.currentUser.uid, currentPaymentClass);
                
                if (success) {
                    paymentSuccess.textContent = 'Payment confirmed! Class unlocked successfully! 🎉';
                    paymentSuccess.style.display = 'block';
                    
                    analytics.logEvent('payment_completed', {
                        class_id: currentPaymentClass,
                        user_id: auth.currentUser.uid,
                        amount: 1
                    });

                    setTimeout(() => {
                        closeModal();
                        loadUserDashboard();
                    }, 2000);
                } else {
                    throw new Error('Failed to unlock class');
                }
            } catch (error) {
                paymentError.textContent = 'Failed to confirm payment. Please try again.';
                paymentError.style.display = 'block';
                confirmPaymentBtn.disabled = false;
                console.error('Payment confirmation error:', error);
            }

            paymentLoading.style.display = 'none';
        });

        

        const dashboardLogoutBtn = document.getElementById('dashboardLogoutBtn');
        if (dashboardLogoutBtn) {
            dashboardLogoutBtn.addEventListener('click', () => {
                auth.signOut();
                analytics.logEvent('logout');
            });
        }

        // Auth State Listener
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                currentUser = user;
                isAdmin = checkAdminStatus(user.email);
                
                userInfo.style.display = 'flex';
                
                // Get user data from Firestore for better name display
                try {
                    const userDoc = await db.collection('users').doc(user.uid).get();
                    const userData = userDoc.exists ? userDoc.data() : {};
                    const displayName = userData.name || user.displayName || user.email.split('@')[0];
                    
                    userName.textContent = displayName;
                    userAvatar.textContent = displayName.charAt(0).toUpperCase();
                    
                    // Show admin indicator
                    if (isAdmin) {
                        adminIndicator.style.display = 'inline';
                        adminPanel.style.display = 'block';
                        updateZoomClassSelect();
                        updateAdminStats();
                        
                        // Start interval for updating online users count
                        onlineUsersInterval = setInterval(updateAdminStats, 10000); // Update every 10 seconds
                    }
                } catch (error) {
                    userName.textContent = user.displayName || user.email;
                    userAvatar.textContent = user.displayName ? user.displayName.charAt(0).toUpperCase() : user.email.charAt(0).toUpperCase();
                }
                
                // Initialize user data if needed
                initializeUserData(user);
                
                // Update online status
                await updateOnlineStatus(user.uid, true);
                
                analytics.logEvent('user_authenticated', {
                    user_id: user.uid
                });
            } else {
                currentUser = null;
                isAdmin = false;
                userInfo.style.display = 'none';
                adminPanel.style.display = 'none';
                adminIndicator.style.display = 'none';
                onlineCount.style.display = 'none';
                
                // Clear intervals
                if (onlineUsersInterval) {
                    clearInterval(onlineUsersInterval);
                    onlineUsersInterval = null;
                }
                
                showLandingPage();
            }
        });

        // Join Class Buttons - Require Authentication
        document.querySelectorAll('.join-class-btn').forEach(button => {
            button.addEventListener('click', () => {
                if (auth.currentUser) {
                    showDashboard();
                } else {
                    showLoginModal();
                }
            });
        });

        // Handle page unload - update offline status
        window.addEventListener('beforeunload', async () => {
            if (currentUser) {
                await updateOnlineStatus(currentUser.uid, false);
            }
        });

        // Initialize the application
        document.addEventListener('DOMContentLoaded', async () => {
            showLandingPage();
            await initializeClasses();
        });
    </script>
</body>
</html>
